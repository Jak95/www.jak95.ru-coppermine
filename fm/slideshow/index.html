<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="content-type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
	
	<link rel="stylesheet" href="/joomla/media/system/js/slideshow/css/slideshow.css">
	<style>
		.slideshow { float: left; margin: 0px; }
	</style>
	<script src="/joomla/media/system/js/slideshow/jquery-1.7.2.min.js" type="text/javascript"></script>
	
	<script src="/joomla/media/system/js/mootools-core.js" type="text/javascript"></script>
	<script src="/joomla/media/system/js/mootools-more.js" type="text/javascript"></script>

	<script src="/joomla/media/system/js/slideshow/slideshow.js" type="text/javascript"></script>
	<script src="/joomla/media/system/js/slideshow/slideshow.flash.js" type="text/javascript"></script>
	<script src="/joomla/media/system/js/slideshow/slideshow.fold.js" type="text/javascript"></script>
	<script src="/joomla/media/system/js/slideshow/slideshow.kenburns.js" type="text/javascript"></script>
	<script src="/joomla/media/system/js/slideshow/slideshow.push.js" type="text/javascript"></script>
	<script>
		function doTest() {
				$.ajax({
					 url: "/coppermine/last_pictures.php",
					 type: "GET",
					 contentType: 'application/json',
					 //data:'jsonData=' + $.toJSON(data),
					 dataType: "json",
					 cache: false,
					 success: function(json){
						var data = {};
						var image;
						for (var i in json){
							image = json[i];
							if (image.normal != undefined) {
								var index = image.getdate.toString().indexOf(' ', 0);
								var caption;
								if (index > 0) {
									caption = image.getdate.toString().substr(0, index);
								} else {
									caption = image.getdate.toString();
								}
								var onlyData = image.getdate.toString()
								data[image.normal] = {caption: caption + ': ' + image.caption, 
								href: image.href};
							}
						}
						
						var show = new Slideshow('overlap', data, {loop: true, fast: false, 
						random: true, thumbnails: false, captions: true, delay: 5000, hu: '',
						overlap: false, resize: 'fit'
						//,height: 256, width: 256
						});
					 },
					 error: function(json, status){
						alert("Error JSON Data: " + json);
					 }
				});		
		}
	</script>
</head>
<body onload="doTest()">
	<div id="overlap" class="slideshow">
		<img height="256" width="256">
	</div>
</body>
</html>